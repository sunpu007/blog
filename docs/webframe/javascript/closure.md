# 深入理解闭包

### 前言

```javascript
对于那些有一点Javascript使用经验但从未真正理解闭包概念的人来说，理解闭包可以看作是某种意义上的重生，但是需要付出非常多的努力和牺牲才能理解这个概念。
```

<p align="right">--引用于《你不知道的Javascript》</p>

什么是闭包，闭包是如何执行的，为什么闭包会造成内存泄露。本文带你深入去理解闭包。

### 闭包的定义

- 在计算机科学中对闭包的定义（维基百科）：
  - **闭包**（英语：Closure），又称**词法闭包**（Lexical Closure）或**函数闭包**（function closures），是在支持 **头等函数** 的编程语言中实现 **词法绑定** 的一种技术。
  - 闭包在实现上是一个结构体，它存储了一个函数（通常是其入口地址）和一个关联的环境（相当于一个符号查找表）。环境里是若干对符号和值的对应关系，它既要包括 **约束变量**（该函数内部绑定的符号），也要包括 **自由变量**（在函数外部定义但在函数内被引用），有些函数也可能没有自由变量。
  - 闭包跟函数最大的不同在于，当捕捉闭包的时候，它的自由变量会在捕捉时被确定，这样即便脱离了捕捉时的上下文，它也能照常运行。捕捉时对于值的处理可以是值拷贝，也可以是名称引用，这通常由语言设计者决定，也可能由用户自行指定（如C++）。
- 我们再来看一下MDN对JavaScript闭包的解释：
  - 一个函数和对其周围状态（**lexical environment，词法环境**）的引用捆绑在一起（或者说函数被引用包围），这样的组合就是**闭包**（**closure**）。也就是说，闭包让你可以在一个内层函数中访问到其外层函数的作用域。
  - 在 JavaScript 中，每当创建一个函数，闭包就会在函数创建的同时被创建出来。

### 闭包的访问过程



### 总结

- 从广义的角度来说：JavaScript中的函数都是闭包；
- 从狭义的角度来说：JavaScript中一个函数，如果访问了外层作用于的变量，那么它是一个闭包；
